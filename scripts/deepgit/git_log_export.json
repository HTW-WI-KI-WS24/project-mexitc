[
  {
    "message": "Merge pull request #14 from CarloLj/login/register\n\nalerts",
    "additions": [
      "@@ -14,13 +14,16 @@\n         \"axios\": \"^0.27.2\",\n         \"chart.js\": \"^3.7.1\",\n         \"react\": \"^17.0.2\",\n+        \"react-alert\": \"^7.0.3\",\n+        \"react-alert-template-basic\": \"^1.0.2\",\n         \"react-chartjs-2\": \"^4.1.0\",\n         \"react-dom\": \"^17.0.2\",\n         \"react-icons\": \"^4.3.1\",\n         \"react-modal\": \"^3.15.1\",\n         \"react-router-dom\": \"^6.3.0\",\n         \"react-scripts\": \"5.0.0\",\n         \"react-unity-webgl\": \"^8.8.0\",\n+        \"react-transition-group\": \"^4.4.2\",\n         \"web-vitals\": \"^2.1.4\"\n       }\n     },\n@@ -6179,6 +6182,15 @@\n         \"utila\": \"~0.4\"\n       }\n     },\n+    \"node_modules/dom-helpers\": {\n+      \"version\": \"5.2.1\",\n+      \"resolved\": \"https://registry.npmjs.org/dom-helpers/-/dom-helpers-5.2.1.tgz\",\n+      \"integrity\": \"sha512-nRCa7CK3VTrM2NmGkIy4cbK7IZlgBE/PYMn55rrXefr5xXDP0LdtfPnblFDoVdcAfslJ7or6iqAUnx0CCGIWQA==\",\n+      \"dependencies\": {\n+        \"@babel/runtime\": \"^7.8.7\",\n+        \"csstype\": \"^3.0.2\"\n+      }\n+    },\n     \"node_modules/dom-serializer\": {\n       \"version\": \"1.3.2\",\n       \"resolved\": \"https://registry.npmjs.org/dom-serializer/-/dom-serializer-1.3.2.tgz\",\n@@ -13051,6 +13063,27 @@\n         \"node\": \">=0.10.0\"\n       }\n     },\n+    \"node_modules/react-alert\": {\n+      \"version\": \"7.0.3\",\n+      \"resolved\": \"https://registry.npmjs.org/react-alert/-/react-alert-7.0.3.tgz\",\n+      \"integrity\": \"sha512-cZ2ZhxytECTxljDfBKpQmwWbfJQFzFf2Qf03L/IB5shbEXtWhDD2JjiW60rwmKT1oZoU+GEnUQw5MFM5+f0B6A==\",\n+      \"dependencies\": {\n+        \"prop-types\": \"^15.7.2\",\n+        \"react-transition-group\": \"^4.4.1\"\n+      },\n+      \"peerDependencies\": {\n+        \"react\": \"^16.8.1 || ^17\",\n+        \"react-dom\": \"^16.8.1 || ^17\"\n+      }\n+    },\n+    \"node_modules/react-alert-template-basic\": {\n+      \"version\": \"1.0.2\",\n+      \"resolved\": \"https://registry.npmjs.org/react-alert-template-basic/-/react-alert-template-basic-1.0.2.tgz\",\n+      \"integrity\": \"sha512-nJSIknM5xN/GzKdKkb5/X9zdiLxSqctww3mEouyeR891nUGP8guqFpCGD8vCjFYSZtq8z3tGcAKBG1XjtLHFHQ==\",\n+      \"peerDependencies\": {\n+        \"react\": \"^16.2.0 || ^17\"\n+      }\n+    },\n     \"node_modules/react-app-polyfill\": {\n       \"version\": \"3.0.0\",\n       \"resolved\": \"https://registry.npmjs.org/react-app-polyfill/-/react-app-polyfill-3.0.0.tgz\",\n@@ -13369,6 +13402,21 @@\n         \"react\": \">=16.8.0\"\n       }\n     },\n+    \"node_modules/react-transition-group\": {\n+      \"version\": \"4.4.2\",\n+      \"resolved\": \"https://registry.npmjs.org/react-transition-group/-/react-transition-group-4.4.2.tgz\",\n+      \"integrity\": \"sha512-/RNYfRAMlZwDSr6z4zNKV6xu53/e2BuaBbGhbyYIXTrmgu/bGHzmqOs7mJSJBHy9Ud+ApHx3QjrkKSp1pxvlFg==\",\n+      \"dependencies\": {\n+        \"@babel/runtime\": \"^7.5.5\",\n+        \"dom-helpers\": \"^5.0.1\",\n+        \"loose-envify\": \"^1.4.0\",\n+        \"prop-types\": \"^15.6.2\"\n+      },\n+      \"peerDependencies\": {\n+        \"react\": \">=16.6.0\",\n+        \"react-dom\": \">=16.6.0\"\n+      }\n+    },\n     \"node_modules/readable-stream\": {\n       \"version\": \"3.6.0\",\n       \"resolved\": \"https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.0.tgz\",\n@@ -20584,6 +20632,15 @@\n         \"utila\": \"~0.4\"\n       }\n     },\n+    \"dom-helpers\": {\n+      \"version\": \"5.2.1\",\n+      \"resolved\": \"https://registry.npmjs.org/dom-helpers/-/dom-helpers-5.2.1.tgz\",\n+      \"integrity\": \"sha512-nRCa7CK3VTrM2NmGkIy4cbK7IZlgBE/PYMn55rrXefr5xXDP0LdtfPnblFDoVdcAfslJ7or6iqAUnx0CCGIWQA==\",\n+      \"requires\": {\n+        \"@babel/runtime\": \"^7.8.7\",\n+        \"csstype\": \"^3.0.2\"\n+      }\n+    },\n     \"dom-serializer\": {\n       \"version\": \"1.3.2\",\n       \"resolved\": \"https://registry.npmjs.org/dom-serializer/-/dom-serializer-1.3.2.tgz\",\n@@ -25409,6 +25466,21 @@\n         \"object-assign\": \"^4.1.1\"\n       }\n     },\n+    \"react-alert\": {\n+      \"version\": \"7.0.3\",\n+      \"resolved\": \"https://registry.npmjs.org/react-alert/-/react-alert-7.0.3.tgz\",\n+      \"integrity\": \"sha512-cZ2ZhxytECTxljDfBKpQmwWbfJQFzFf2Qf03L/IB5shbEXtWhDD2JjiW60rwmKT1oZoU+GEnUQw5MFM5+f0B6A==\",\n+      \"requires\": {\n+        \"prop-types\": \"^15.7.2\",\n+        \"react-transition-group\": \"^4.4.1\"\n+      }\n+    },\n+    \"react-alert-template-basic\": {\n+      \"version\": \"1.0.2\",\n+      \"resolved\": \"https://registry.npmjs.org/react-alert-template-basic/-/react-alert-template-basic-1.0.2.tgz\",\n+      \"integrity\": \"sha512-nJSIknM5xN/GzKdKkb5/X9zdiLxSqctww3mEouyeR891nUGP8guqFpCGD8vCjFYSZtq8z3tGcAKBG1XjtLHFHQ==\",\n+      \"requires\": {}\n+    },\n     \"react-app-polyfill\": {\n       \"version\": \"3.0.0\",\n       \"resolved\": \"https://registry.npmjs.org/react-app-polyfill/-/react-app-polyfill-3.0.0.tgz\",\n@@ -25639,6 +25711,17 @@\n       \"integrity\": \"sha512-4PHTEwUQd70IJAy+jdVvHM+A6No9GMTmA/PCFOWkgpy2g0SlKJF3LREt92TfhttnMJ+CLL9iF8X03wMBvNvsjA==\",\n       \"requires\": {}\n     },\n+    \"react-transition-group\": {\n+      \"version\": \"4.4.2\",\n+      \"resolved\": \"https://registry.npmjs.org/react-transition-group/-/react-transition-group-4.4.2.tgz\",\n+      \"integrity\": \"sha512-/RNYfRAMlZwDSr6z4zNKV6xu53/e2BuaBbGhbyYIXTrmgu/bGHzmqOs7mJSJBHy9Ud+ApHx3QjrkKSp1pxvlFg==\",\n+      \"requires\": {\n+        \"@babel/runtime\": \"^7.5.5\",\n+        \"dom-helpers\": \"^5.0.1\",\n+        \"loose-envify\": \"^1.4.0\",\n+        \"prop-types\": \"^15.6.2\"\n+      }\n+    },\n     \"readable-stream\": {\n       \"version\": \"3.6.0\",\n       \"resolved\": \"https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.0.tgz\",",
      "@@ -9,13 +9,16 @@\n     \"axios\": \"^0.27.2\",\n     \"chart.js\": \"^3.7.1\",\n     \"react\": \"^17.0.2\",\n+    \"react-alert\": \"^7.0.3\",\n+    \"react-alert-template-basic\": \"^1.0.2\",\n     \"react-chartjs-2\": \"^4.1.0\",\n     \"react-dom\": \"^17.0.2\",\n     \"react-icons\": \"^4.3.1\",\n     \"react-modal\": \"^3.15.1\",\n     \"react-router-dom\": \"^6.3.0\",\n     \"react-scripts\": \"5.0.0\",\n     \"react-unity-webgl\": \"^8.8.0\",\n+    \"react-transition-group\": \"^4.4.2\",\n     \"web-vitals\": \"^2.1.4\"\n   },\n   \"proxy\": \"http://localhost:3001\",",
      "@@ -204,3 +204,11 @@ h4 {\n }\n \n /* END OF CSS FOR HOME AND PATIENTS VIEWS */\n+/* Alert*/\n+.alert {\n+  padding: 0.7rem;\n+  margin: 1rem 0;\n+  opacity: 0.9;\n+  background: red;\n+  color: #fff;\n+}\n\\ No newline at end of file",
      "@@ -3,9 +3,11 @@ import { useNavigate  } from \"react-router-dom\"\n import login from '../layout/images/login.PNG'\n import './auth.css'\n import axios from 'axios';\n+import { useAlert } from 'react-alert'\n \n const Login = () => {\n     localStorage.clear();\n+    const alert = useAlert()\n \n     const navigate = useNavigate();\n \n@@ -40,15 +42,13 @@ const Login = () => {\n             const res = await axios.post('/login',user,config);\n             setAuth({token: res.data.token});\n \n-            //console.log(res.data);\n             localStorage.setItem('id',res.data.empleadoID);\n             localStorage.setItem('name',res.data.name);\n             localStorage.setItem('token',res.data.token);\n-            //console.log(authState);\n-\n+            alert.success('Bienvenid@ ' + res.data.name);\n \n         } catch (error) {\n-            console.log(error.response.data.msg);\n+            alert.error(error.response.data.msg);\n         }\n     }\n ",
      "@@ -3,11 +3,14 @@ import { useNavigate  } from \"react-router-dom\"\n import login from '../layout/images/login.PNG'\n import './auth.css'\n import axios from 'axios';\n+import { useAlert } from 'react-alert'\n \n const Register = props => {\n     localStorage.clear();\n \n-    //allow to naviigate through the routes\n+    const alert = useAlert()\n+\n+    //allow to navigate through the routes\n     const navigate = useNavigate ();\n \n     //user register fields\n@@ -53,14 +56,13 @@ const Register = props => {\n             const res = await axios.post('/register',user,config);\n             setAuth({token: res.data.token});\n \n-            //console.log(res.data);\n             localStorage.setItem('id',res.data.empleadoID);\n             localStorage.setItem('name',res.data.name);\n             localStorage.setItem('token',res.data.token);\n-            //console.log(authState);\n+            alert.success('Bienvenid@ ' + res.data.name);\n \n         } catch (error) {\n-            console.log(error.response.data.msg);\n+            alert.error(error.response.data.msg);\n         }\n     }\n ",
      "@@ -107,7 +107,7 @@ const Home = () => {\n   }\n   return (\n     <div style={{width: centeredHomeWidth}} className='centered-home'>\n-      <h1>Bienvenida de nuevo, Marcela</h1>\n+      <h1>Bienvenid@ de nuevo, {localStorage.getItem('name')}</h1>\n       <Navbar />\n       <div className='home-bar'>\n         <div className='home-view-buttons'>",
      "@@ -3,11 +3,21 @@ import ReactDOM from 'react-dom';\n import './index.css';\n import App from './App';\n import reportWebVitals from './reportWebVitals';\n+import { Provider as AlertProvider } from 'react-alert';\n+import AlertTemplate from 'react-alert-template-basic';\n+\n+// optional cofiguration\n+const options = {\n+  position: 'bottom center',\n+  timeout: 5000,\n+  offset: '30px',\n+  transition: 'scale'\n+}\n \n ReactDOM.render(\n-  <React.StrictMode>\n+  <AlertProvider template={AlertTemplate} {...options}>\n     <App />\n-  </React.StrictMode>,\n+  </AlertProvider>,\n   document.getElementById('root')\n );\n "
    ]
  },
  {
    "message": "register api integration",
    "additions": [
      "@@ -1,10 +1,12 @@\n-import React, {useState} from 'react'\n+import React, {useState, useEffect} from 'react'\n import { useNavigate  } from \"react-router-dom\"\n import login from '../layout/images/login.PNG'\n import './auth.css'\n+import axios from 'axios';\n \n const Register = props => {\n-    \n+    localStorage.clear();\n+\n     //allow to naviigate through the routes\n     const navigate = useNavigate ();\n \n@@ -14,31 +16,70 @@ const Register = props => {\n         lastnameP: '',\n         lastnameM: '',\n         date: '',\n-        type: '',\n-        sex: '',\n+        type: 1,\n+        sex: 'Masculino',\n         cedula: '',\n         email: '',\n         password: '',\n-        password2: ''\n+        password2: '',\n+        pfp: ''\n     });\n \n-    const {name,lastnameP,lastnameM,date,cedula,email,password,password2} = user;\n+    const [authState,setAuth] = useState({\n+        token: ''\n+    });\n+\n+    useEffect(() => {\n+        if(authState.token !== ''){\n+            navigate('/home');\n+        }\n+        //eslint-disable-next-line\n+    },[authState.token]);\n+\n+    const {name,lastnameP,lastnameM,date,cedula,email,password,password2,pfp} = user;\n \n     //copies user data and changes the target of the onchange\n     const onChange = e => setUser({...user, [e.target.name]:e.target.value});\n \n+    const registerUser = async() => {\n+        const config = {\n+            headers: {\n+                'Content-Type': 'application/json'\n+            }\n+        }\n+        console.log(user);\n+\n+        try {\n+            const res = await axios.post('/register',user,config);\n+            setAuth({token: res.data.token});\n+\n+            //console.log(res.data);\n+            localStorage.setItem('id',res.data.empleadoID);\n+            localStorage.setItem('name',res.data.name);\n+            localStorage.setItem('token',res.data.token);\n+            //console.log(authState);\n+\n+        } catch (error) {\n+            console.log(error.response.data.msg);\n+        }\n+    }\n+\n     const onSubmit = e => {\n         e.preventDefault();\n         console.log(user);\n         if(name === '' || email === '' || password === ''){\n             //missing info\n+            console.log(\"Please fill all the inputs\");\n         }else if (password !== password2){\n             //passwords do not match\n+            console.log(\"Passwords do not match\");\n         }else{\n             //register\n-            navigate('/home');\n+            registerUser();\n         }\n     }\n+\n+\n     \n     const showPassword = () =>{\n         const toggle = document.getElementById('togglePassword');\n@@ -78,8 +119,8 @@ const Register = props => {\n                                 <input placeholder='Apellido Paterno' type='text' name = 'lastnameP' value={lastnameP} onChange = {onChange} required/>\n                                 <input placeholder='Fecha de nacimiento' type='date' name = 'date' value={date} onChange = {onChange} required/>\n                                 <select id=\"empleados\" name='type' onChange = {onChange}>\n-                                    <option value=\"M\u00e9dic@\">M\u00e9dic@</option>\n-                                    <option value=\"Enfermer@\">Enfermer@</option>\n+                                    <option value={1}>M\u00e9dic@</option>\n+                                    <option value={2}>Enfermer@</option>\n                                 </select >\n                                 <select  id=\"sexos\" name='sex' onChange = {onChange}>\n                                     <option value=\"Masculino\">Masculino</option>\n@@ -96,8 +137,10 @@ const Register = props => {\n                                 </div>\n                                 <div>\n                                     <i className=\"bi bi-eye\" id=\"togglePassword2\" onClick={showPassword2}/>\n-                                    <input id = \"password2\" placeholder='Confirmar Contrase\u00f1a' type='password' name = 'password2' value={password2} onChange = {onChange} required/>\n+                                    <input id = \"password2\" placeholder='Confirmar' type='password' name = 'password2' value={password2} onChange = {onChange} required/>\n                                 </div>\n+                                <input placeholder='URL img de perfil' type='text' name = 'pfp' value={pfp} onChange = {onChange} required/>\n+\n                             </div>\n                         </div>\n                         <br/>"
    ]
  },
  {
    "message": "check token on pages and date fix",
    "additions": [
      "@@ -9,7 +9,6 @@ import Reports from \"./components/pages/Reports\";\n import Navbar from \"./components/Navbar\";\n import Patient from \"./components/pages/PatientCards/Patient\";\n import Moca from \"./components/pages/MocaPage/Moca\";\n-import NewPatient from './components/newPatient/NewPatient';\n \n \n //utils\n@@ -30,7 +29,6 @@ function App() {\n                     <Route exact path='/home' element = {<Home/>}/>\n                     <Route exact path='/Register' element = {<Register/>}/>\n                     <Route exact path='/PatientCard/:id' element = {<Patient/>}/>\n-                    <Route exact path='/NewPatient' element = {<NewPatient/>}/>\n                 </Routes>\n             </Fragment>\n         </Router>",
      "@@ -90,11 +90,11 @@ const AddPatientButton = () => {\n \n     return(\n         <section>\n-            <a href=\"#\" class='addPatientButton' onClick={open}>.</a>\n-            <div class = \"modal-container\">\n-                <div class = \"modal modal-close\">\n-                    <a class = \"close\" onClick={close}>X</a>\n-                    <div class = \"modal-text\">\n+            <a href=\"#\" className='addPatientButton' onClick={open}>.</a>\n+            <div className = \"modal-container\">\n+                <div className = \"modal modal-close\">\n+                    <a className = \"close\" onClick={close}>X</a>\n+                    <div className = \"modal-text\">\n                         <h2 className='header'>Agregar nuevo paciente</h2>\n                         <form onSubmit={onSubmit}>\n                             <div className='grid-2'>\n@@ -112,20 +112,20 @@ const AddPatientButton = () => {\n                                 </div>\n                                 <div>\n                                     <input placeholder='Discapacidades' type='text' name = 'disabilities' value={disabilities} onChange = {onChange} required/>\n-                                    <div class ='toggle-div'>\n-                                        <label class ='toggle-label'>Queja de Memoria</label>\n-                                        <label class=\"toggle\">\n+                                    <div className ='toggle-div'>\n+                                        <label className ='toggle-label'>Queja de Memoria</label>\n+                                        <label className=\"toggle\">\n                                             <input id='memoryCheckbox' type='checkbox' name = 'memoryComplaint' onChange = {onChange} />\n-                                            <span class = \"slider\"></span>\n-                                            <span class =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n+                                            <span className = \"slider\"></span>\n+                                            <span className =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n                                         </label>\n                                     </div>\n-                                    <div class ='toggle-div'>    \n-                                        <label class ='toggle-label'>Hipoacusia severa</label>\n-                                        <label class=\"toggle\">\n+                                    <div className ='toggle-div'>    \n+                                        <label className ='toggle-label'>Hipoacusia severa</label>\n+                                        <label className=\"toggle\">\n                                         <input id='hearingCheckbox' type='checkbox' name = 'severeHearingLoss' onChange = {onChange} />\n-                                            <span class = \"slider\"></span>\n-                                            <span class =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n+                                            <span className = \"slider\"></span>\n+                                            <span className =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n                                         </label>\n                                     </div>\n                                 ",
      "@@ -1,78 +0,0 @@\n-import React, {useState} from 'react'\n-import { useNavigate  } from \"react-router-dom\"\n-\n-\n-const NewPatient = () => {\n-    \n-    //allow to navigate through the routes\n-    const navigate = useNavigate ();\n-\n-    //user register fields\n-    const [user,setUser] = useState({\n-        name: '',\n-        lastName: '',\n-        motherLastName: '',\n-        birthday: '',\n-        gender: '',\n-        scholarity: '',\n-        disabilities: '',\n-        memoryComplaint: '',\n-        severeHearingLoss: '',\n-        emergencyContact: '',\n-        profileImage: ''\n-    });\n-\n-    const {name, lastName, motherLastName, birthday, gender, scholarity, disabilities, memoryComplaint, severeHearingLoss, emergencyContact, image} = user;\n-\n-    //copies user data and changes the target of the onchange\n-    const onChange = e => setUser({...user, [e.target.name]:e.target.value});\n-\n-    const onSubmit = e => {\n-        e.preventDefault();\n-\n-        if(name === '' || lastName === '' || motherLastName === '' || birthday === '' || gender === '' || scholarity === '' || disabilities === '' || memoryComplaint === '' || severeHearingLoss === '' || emergencyContact === ''){\n-            //missing info\n-        }else{\n-            //register\n-            navigate('/home');\n-        }\n-    }\n-    \n-    //El onfocus=\"(this.type='date')\" no sirve\n-    return (\n-        <div className='grid-2'>\n-            <div className='form-container'>\n-                <h2 className='auth-header'>Add New Patient</h2>\n-                <form onSubmit={onSubmit}>\n-                    <div className='grid-2'>\n-                        <div>\n-                            <input placeholder='Nombre' type='text' name = 'name' value={name} onChange = {onChange} required/>\n-                            <input placeholder='Apellido Paterno' type='text' name = 'lastName' value={lastName} onChange = {onChange} required/>\n-                            <input placeholder='Apellido Materno' type='text' name = 'motherLastName' value={motherLastName} onChange = {onChange} required/>\n-                            <label for=\"fe\">Fecha de Nacimiento</label>\n-                            <input type='date' name = 'birthday' value={birthday} onChange = {onChange} required/>\n-                            <select  id=\"sexos\" name='sex' onChange = {onChange}>\n-                                <option value=\"Masculino\">Masculino</option>\n-                                <option value=\"Femenino\">Femenino</option>\n-                            </select >\n-                        </div>\n-                        <div>\n-                            <input placeholder='Escolaridad' type='text' name = 'scholarity' value={scholarity} onChange = {onChange} required/>\n-                            <input placeholder='Discapacidades' type='text' name = 'disabilities' value={disabilities} onChange = {onChange} required/>\n-                            <label>Queja de memoria</label>\n-                            <input placeholder='Queja de memoria' type='checkbox' name = 'memoryComplaint' value={memoryComplaint} onChange = {onChange} />\n-                            <label>Hipoacusia severa</label>\n-                            <input placeholder='Hipoacusia severa' type='checkbox' name = 'severeHearingLoss' value={severeHearingLoss} onChange = {onChange} />\n-                            <input placeholder='Contacto de Emergencia' type='number' name = 'emergencyContact' value={emergencyContact} onChange = {onChange} required/>\n-                            <input placeholder='URL Foto de perfil' type = 'text' id = \"files\" value={image} accept=\"image/png, image/jpeg\" onChange = {onChange}/>\n-                        </div>\n-                    </div>\n-                    <input type=\"submit\" value = \"Agregar Paciente\" formTarget='_blank'/>\n-                </form>\n-                <button className='btn-back' onClick={() => navigate('/home')}> Atr\u00e1s</button>\n-            </div>\n-        </div>\n-    )\n-}\n-\n-export default NewPatient;",
      "@@ -16,23 +16,25 @@ import { useAlert } from 'react-alert'\n const Home = () => {\n   const alert = useAlert()\n   const navigate = useNavigate ();\n-\n   const [datos, setData] = useState(null);\n \n   const loadPatients = async () => {\n     try {\n       const res = await axios.get('/patients');\n       setData(res.data.message);\n       alert.success('Patients loaded');\n-\n     } catch (error) {\n       alert.error('Error while fetching patients');\n     }\n   }\n \n   useEffect(() => {\n-    loadPatients();\n-  }, []);\n+    if(!localStorage.token){\n+      navigate('/');\n+    }else{\n+      loadPatients();\n+    }\n+  },[]);\n \n   const OpenPatientCard = (currentPatient) => {\n     //allow to naviigate through the routes",
      "@@ -2,7 +2,7 @@ import './Moca.css';\n \r\n import Unity, {UnityContext} from 'react-unity-webgl';\r\n import { Fragment, useEffect, useState } from 'react';\r\n-import { Navigate, useParams } from \"react-router-dom\";\r\n+import { Navigate, useParams, useNavigate } from \"react-router-dom\";\r\n import axios from 'axios';\r\n import { useAlert } from 'react-alert'\r\n \r\n@@ -20,7 +20,8 @@ const unityContext = new UnityContext({\n }); \r\n \r\n function Moca() {\r\n-  const alert = useAlert()\r\n+  const navigate = useNavigate ();\r\n+  const alert = useAlert();\r\n   const [isUnityMounted, setIsUnityMounted] = useState(true);\r\n   const [isLoaded, setIsLoaded] = useState(false);\r\n   const [progression, setProgression] = useState(0);\r\n@@ -29,13 +30,18 @@ function Moca() {\n   const {idEmpleado, idPaciente} = useParams();\r\n \r\n   useEffect(function(){\r\n-    unityContext.on(\"progress\", handleOnUnityProgress);\r\n-    unityContext.on(\"loaded\", handleOnUnityLoaded);\r\n-    unityContext.on(\"MocaFinished\", handleMocaFinish);\r\n-\r\n-    return function(){\r\n-      unityContext.removeAllEventListeners();\r\n-    };\r\n+    if(!localStorage.token){\r\n+      navigate('/');\r\n+    }else{\r\n+      unityContext.on(\"progress\", handleOnUnityProgress);\r\n+      unityContext.on(\"loaded\", handleOnUnityLoaded);\r\n+      unityContext.on(\"MocaFinished\", handleMocaFinish);\r\n+\r\n+      return function(){\r\n+        unityContext.removeAllEventListeners();\r\n+      };\r\n+    }\r\n+    \r\n   }, []);\r\n \r\n   function handleOnUnityProgress(progression) {\r",
      "@@ -6,9 +6,11 @@ import TestButton from \"../../TestButton\";\n import TestGraph from \"../../graph/TestGraph\";\r\n import { Bar } from \"react-chartjs-2\";\r\n import ListCardTest from \"./ListCardTest\";\r\n-import { useParams } from \"react-router-dom\";\r\n+import { useParams, useNavigate } from \"react-router-dom\";\r\n import BackButton from '../../BackButton'\r\n import axios from 'axios';\r\n+import { useAlert } from 'react-alert'\r\n+\r\n \r\n const HomeLink = \"/moca/\";\r\n \r\n@@ -66,7 +68,7 @@ const Details = (props) => {\n   if (datos) {\r\n     var graphDates = datos.map((currentGraph)  => {\r\n       return (\r\n-        currentGraph.fecha\r\n+        currentGraph.fecha.slice(0, 10)\r\n       );\r\n     });\r\n   }\r\n@@ -144,6 +146,9 @@ const Details = (props) => {\n             <tbody>\r\n               {datos ? (\r\n                 datos.map((currentTest) => {\r\n+                  \r\n+                  currentTest.fecha = currentTest.fecha.slice(0, 10);\r\n+\r\n                   return (\r\n                     <ListCardTest\r\n                       testObj={currentTest}\r\n@@ -205,7 +210,8 @@ const getEdad = (dateString) => {\n const Patient = () => {\r\n   const { id } = useParams();\r\n   const [datos, setData] = React.useState(null);\r\n-\r\n+  const alert = useAlert();\r\n+  const navigate = useNavigate();\r\n   const loadPatient = async () =>{\r\n     try {\r\n       const res = await axios.get(\"/patient/\" + id);\r\n@@ -220,7 +226,11 @@ const Patient = () => {\n   }\r\n \r\n   useEffect(() => {\r\n-    loadPatient();\r\n+    if(!localStorage.token){\r\n+      navigate('/');\r\n+    }else{\r\n+      loadPatient();\r\n+    }\r\n     /*fetch(\"/patient/\" + id)\r\n       .then((res) => res.json())\r\n       .then((data) => setData(data.message));*/\r"
    ]
  },
  {
    "message": "Merge pull request #6 from CarloLj/login/register\n\nminor design changes",
    "additions": [
      "@@ -61,7 +61,7 @@ const Login = () => {\n                         <i className=\"bi bi-eye\" id=\"togglePassword\" onClick={showPassword}/>\n                         <input id = \"password\" placeholder='Contrase\u00f1a' type='password' name = 'password' value={password} onChange = {onChange} required/>\n                     </div>\n-                    <p style={{margin: '15px', cursor: 'pointer',textDecoration: 'underline'}} onClick = {() => navigate('/register', { replace: true })}>\u00bfNo tienes cuenta? Registrate</p>\n+                    <p style={{margin: '15px', cursor: 'pointer',textDecoration: 'underline'}} onClick = {() => navigate('/register')}>\u00bfNo tienes cuenta? Registrate</p>\n                     <input type=\"submit\" value = \"Iniciar Sesi\u00f3n\"/>\n                 </form>\n             </div>",
      "@@ -103,7 +103,7 @@ const Register = props => {\n                         <br/>\n                     <input type=\"submit\" value = \"Registarse\"/>\n                 </form>\n-                <button style = {{marginBottom:'5%'}} className='btn-back' onClick={() => navigate('/', { replace: true })}> Atr\u00e1s</button>\n+                <button style = {{marginBottom:'5%'}} className='btn-back' onClick={() => navigate('/')}> Atr\u00e1s</button>\n             </div>\n             <div>\n                 <center>",
      "@@ -99,7 +99,7 @@\n   #togglePassword2,\n   #togglePassword{\n     position: relative;\n-    left: 90%;\n+    left: 85%;\n     top: 10px;\n     padding: 10px;\n     cursor: pointer;"
    ]
  },
  {
    "message": "Login api integration",
    "additions": [
      "@@ -11,6 +11,7 @@\n         \"@testing-library/jest-dom\": \"^5.16.2\",\n         \"@testing-library/react\": \"^12.1.4\",\n         \"@testing-library/user-event\": \"^13.5.0\",\n+        \"axios\": \"^0.27.2\",\n         \"chart.js\": \"^3.7.1\",\n         \"react\": \"^17.0.2\",\n         \"react-chartjs-2\": \"^4.1.0\",\n@@ -4447,6 +4448,28 @@\n         \"node\": \">=4\"\n       }\n     },\n+    \"node_modules/axios\": {\n+      \"version\": \"0.27.2\",\n+      \"resolved\": \"https://registry.npmjs.org/axios/-/axios-0.27.2.tgz\",\n+      \"integrity\": \"sha512-t+yRIyySRTp/wua5xEr+z1q60QmLq8ABsS5O9Me1AsE5dfKqgnCFzwiCZZ/cGNd1lq4/7akDWMxdhVlucjmnOQ==\",\n+      \"dependencies\": {\n+        \"follow-redirects\": \"^1.14.9\",\n+        \"form-data\": \"^4.0.0\"\n+      }\n+    },\n+    \"node_modules/axios/node_modules/form-data\": {\n+      \"version\": \"4.0.0\",\n+      \"resolved\": \"https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz\",\n+      \"integrity\": \"sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==\",\n+      \"dependencies\": {\n+        \"asynckit\": \"^0.4.0\",\n+        \"combined-stream\": \"^1.0.8\",\n+        \"mime-types\": \"^2.1.12\"\n+      },\n+      \"engines\": {\n+        \"node\": \">= 6\"\n+      }\n+    },\n     \"node_modules/axobject-query\": {\n       \"version\": \"2.2.0\",\n       \"resolved\": \"https://registry.npmjs.org/axobject-query/-/axobject-query-2.2.0.tgz\",\n@@ -19204,6 +19227,27 @@\n       \"resolved\": \"https://registry.npmjs.org/axe-core/-/axe-core-4.4.1.tgz\",\n       \"integrity\": \"sha512-gd1kmb21kwNuWr6BQz8fv6GNECPBnUasepcoLbekws23NVBLODdsClRZ+bQ8+9Uomf3Sm3+Vwn0oYG9NvwnJCw==\"\n     },\n+    \"axios\": {\n+      \"version\": \"0.27.2\",\n+      \"resolved\": \"https://registry.npmjs.org/axios/-/axios-0.27.2.tgz\",\n+      \"integrity\": \"sha512-t+yRIyySRTp/wua5xEr+z1q60QmLq8ABsS5O9Me1AsE5dfKqgnCFzwiCZZ/cGNd1lq4/7akDWMxdhVlucjmnOQ==\",\n+      \"requires\": {\n+        \"follow-redirects\": \"^1.14.9\",\n+        \"form-data\": \"^4.0.0\"\n+      },\n+      \"dependencies\": {\n+        \"form-data\": {\n+          \"version\": \"4.0.0\",\n+          \"resolved\": \"https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz\",\n+          \"integrity\": \"sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==\",\n+          \"requires\": {\n+            \"asynckit\": \"^0.4.0\",\n+            \"combined-stream\": \"^1.0.8\",\n+            \"mime-types\": \"^2.1.12\"\n+          }\n+        }\n+      }\n+    },\n     \"axobject-query\": {\n       \"version\": \"2.2.0\",\n       \"resolved\": \"https://registry.npmjs.org/axobject-query/-/axobject-query-2.2.0.tgz\",",
      "@@ -6,6 +6,7 @@\n     \"@testing-library/jest-dom\": \"^5.16.2\",\n     \"@testing-library/react\": \"^12.1.4\",\n     \"@testing-library/user-event\": \"^13.5.0\",\n+    \"axios\": \"^0.27.2\",\n     \"chart.js\": \"^3.7.1\",\n     \"react\": \"^17.0.2\",\n     \"react-chartjs-2\": \"^4.1.0\",",
      "@@ -1,41 +1,63 @@\n-import React, {useState} from 'react'\n+import React, {useEffect, useState} from 'react'\n import { useNavigate  } from \"react-router-dom\"\n import login from '../layout/images/login.PNG'\n import './auth.css'\n+import axios from 'axios';\n \n const Login = () => {\n+    localStorage.clear();\n \n-    const navigate = useNavigate ();\n+    const navigate = useNavigate();\n \n     const [user,setUser] = useState({\n         email: '',\n         password: ''\n     });\n \n+    const [authState,setAuth] = useState({\n+        token: ''\n+    });\n+\n+    useEffect(() => {\n+        if(authState.token !== ''){\n+            navigate('/home');\n+        }\n+        //eslint-disable-next-line\n+    },[authState.token]);\n+\n     const {email,password} = user;\n \n     const onChange = e => setUser({...user, [e.target.name]:e.target.value});\n \n+    const loginUser = async() => {\n+        const config = {\n+            headers: {\n+                'Content-Type': 'application/json'\n+            }\n+        }\n+\n+        try {\n+            const res = await axios.post('/login',user,config);\n+            setAuth({token: res.data.token});\n+\n+            //console.log(res.data);\n+            localStorage.setItem('id',res.data.empleadoID);\n+            localStorage.setItem('name',res.data.name);\n+            localStorage.setItem('token',res.data.token);\n+            //console.log(authState);\n+\n+\n+        } catch (error) {\n+            console.log(error.response.data.msg);\n+        }\n+    }\n+\n     const onSubmit = e => {\n         e.preventDefault();\n-        navigate('/home');\n-        /*if(email === '' || password === ''){\n-            //missing inputs\n-        }else{\n-            //login\n-        }*/\n-    }\n \n-    /*const togglePassword = document.querySelector('#togglePassword');\n-    const passwordInput = document.querySelector('#password');\n+        loginUser();\n \n-    togglePassword.addEventListener('click', function (e) {\n-        // toggle the type attribute\n-        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';\n-        passwordInput.setAttribute('type', type);\n-        // toggle the eye / eye slash icon\n-        this.classList.toggle('bi-eye-slash');\n-    });*/\n+    }\n \n     const showPassword = () =>{\n         const toggle = document.getElementById('togglePassword');",
      "@@ -193,7 +193,7 @@ const Details =(props) =>{\n                 </tr>\n             </thead>\n             <tbody>\n-                {\n+                {/*\n                 examenes.map((currentTest) => {\n                 return(\n                     <ListCardTest\n@@ -205,7 +205,7 @@ const Details =(props) =>{\n                         notas={currentTest.notas}\n                     />\n                 );\n-                })} \n+                })*/} \n             </tbody>\n             </table>\n             }"
    ]
  },
  {
    "message": "Merge pull request #17 from CarloLj/addPatient\n\nReset Form",
    "additions": [
      "@@ -20,8 +20,8 @@\n     \"react-modal\": \"^3.15.1\",\n     \"react-router-dom\": \"^6.3.0\",\n     \"react-scripts\": \"5.0.0\",\n-    \"react-unity-webgl\": \"^8.8.0\",\n     \"react-transition-group\": \"^4.4.2\",\n+    \"react-unity-webgl\": \"^8.8.0\",\n     \"web-vitals\": \"^2.1.4\"\n   },\n   \"proxy\": \"http://localhost:3001\",",
      "@@ -1,10 +1,12 @@\n import { useNavigate  } from \"react-router-dom\"\n import React, {useState} from 'react'\n import './newPatient.css'\n+import { useAlert } from 'react-alert'\n \n \n const AddPatientButton = () => {\n     const navigate = useNavigate ();\n+    const alert = useAlert();\n     /*  ---  MODAL FORM --- */\n     \n     //patient register fields\n@@ -37,16 +39,24 @@ const AddPatientButton = () => {\n             e.target.value = document.getElementById('hearingCheckbox').value;\n         }\n         setPatient({...patient, [e.target.name]:e.target.value}); \n+        console.log(e.target.value)\n     }\n     const onSubmit = e => {\n         e.preventDefault();\n         console.log(patient)\n-        if(name === '' || lastName === '' || motherLastName === '' || birthday === '' || gender === '' || scholarity === '' || disabilities === '' || memoryComplaint === '' || severeHearingLoss === '' || emergencyContact === ''){\n-            console.log('Missing info')\n+        if(name === '' || lastName === '' || motherLastName === '' || birthday === '' || gender === '' || scholarity === '' || disabilities === '' || memoryComplaint === '' || severeHearingLoss === '' || emergencyContact === '' || image === ''){\n             //missing info\n-        }else{\n-            console.log('Passed test')\n-            addToDB(patient);\n+        }\n+        else{\n+            try {\n+                addToDB(patient);\n+                close();\n+                resetForm();\n+                alert.success('Paciente a\u00f1adido exitosamente');\n+            } catch (error) {\n+                alert.error(error.response.data.msg);\n+            }\n+            \n         }\n     }\n     \n@@ -74,6 +84,22 @@ const AddPatientButton = () => {\n         }\n     })\n \n+    const resetForm = () => {\n+        setPatient({...patient, \n+            \"name\"  : '',\n+            \"lastName\"  : '',\n+            \"motherLastName\": '',\n+            \"birthday\": '',\n+            \"gender\": '',\n+            \"scholarity\": '',\n+            \"disabilities\": '',\n+            \"memoryComplaint\": false,\n+            \"severeHearingLoss\": false,\n+            \"emergencyContact\": '',\n+            \"image\": ''\n+        });\n+    }\n+\n \n     /*  ---  ADD TO DATABASE --- */\n \n@@ -96,7 +122,7 @@ const AddPatientButton = () => {\n                     <a class = \"close\" onClick={close}>X</a>\n                     <div class = \"modal-text\">\n                         <h2 className='header'>Agregar nuevo paciente</h2>\n-                        <form onSubmit={onSubmit}>\n+                        <form id = \"formulario\" onSubmit={onSubmit}>\n                             <div className='grid-2'>\n                                 <div>\n                                     <input placeholder='Nombre' type='text' name = 'name' value={name} onChange = {onChange} required/>"
    ]
  },
  {
    "message": "separation of lastname inputs",
    "additions": [
      "@@ -30,164 +30,4 @@ body{\n \n .App-link {\n   color: #61dafb;\n-}\n-\n-.form-group {\n-  margin: 1.2rem 0;\n-}\n-\n-.form-group input {\n-  margin: 0.2rem 0;\n-}\n-\n-input[type='text'],\n-input[type='email'],\n-input[type='password'],\n-input[type='date'],\n-input,\n-select,\n-textarea {\n-  display: block;\n-  width: 90%;\n-  font-size: 1.2rem;\n-  border: none;\n-  border-radius: 8px;\n-  background-color: #EFF0F7;\n-  padding: 15px;\n-  margin: 15px;\n-  font-size: 18px;\n-  outline: none;\n-}\n-\n-select{\n-  cursor: pointer;\n-}\n-\n-input[type='submit'] {\n-  font: inherit;\n-  padding: 10px;\n-  background-color: #003699;\n-  color: white;\n-  border-radius: 8px;\n-  border: none;\n-  margin: 15px;\n-  font-size: 18px;\n-  cursor: pointer;\n-  width: fit-content;\n-}\n-\n-input[type='submit']:active,\n-.btn-back:active{\n-  transform: scale(0.85);\n-  box-shadow: 3px 2px 25px 1px rgba(0,0,0,0.25);\n-}\n-\n-.btn-back{\n-  display: inline-block;\n-  font-size: 18px;\n-  font-weight: bold;\n-  color: #333;\n-  padding: 10px;\n-  font-size: 1rem;\n-  border: none;\n-  cursor: pointer;\n-  outline: none;\n-  border-radius: 8px;\n-  margin-left: 15px;\n-}\n-\n-.geriatrik{\n-  font-size: 72px;\n-  font-weight: bold;\n-  margin-left: 15px;\n-}\n-\n-.auth-header{\n-  font-size: 30px;\n-  margin-left: 15px;\n-}\n-\n-.form-container {\n-  max-width: 600px;\n-  margin-left: 25%;\n-  margin-top: 15%;\n-  overflow: hidden;\n-  padding: 0 2rem;\n-  z-index: 1;\n-}\n-\n-.grid-2 {\n-  display: grid;\n-  grid-template-columns: repeat(2, 1fr);\n-  grid-gap: 2rem;\n-}\n-\n-.login-img{\n-  float: right;\n-  overflow: hidden;\n-  max-width: 600px;\n-  margin-top: 15%;\n-  margin-right: 25%;\n-}\n-\n-#togglePassword2,\n-#togglePassword{\n-  position: relative;\n-  left: 90%;\n-  top: 10px;\n-  padding: 10px;\n-  cursor: pointer;\n-}\n-\n-#password2,\n-#password{\n-  margin-left: 15px;\n-  margin-top: -25px;\n-}\n-\n-@keyframes App-logo-spin {\n-  from {\n-    transform: rotate(0deg);\n-  }\n-  to {\n-    transform: rotate(360deg);\n-  }\n-}\n-\n-@media (max-width: 1200px) {\n-  .login-img{\n-    width: 400px;\n-    margin-top: 40% ;\n-  }\n-\n-  input[type='text'],\n-  input[type='email'],\n-  input[type='password'],\n-  input[type='date'],\n-  select,\n-  textarea {\n-    width: 90%;\n-  }\n-\n-  .form-container {\n-    margin-top: 25%;\n-  }\n-}\n-\n-@media (max-width: 1100px) {\n-  .login-img{\n-    display: none;\n-  }\n-\n-  .form-container {\n-    margin: 5%;\n-  }\n-\n-  .grid-2 {\n-    display: block;\n-  }\n-\n-  .form-container {\n-    margin-right: 8%;\n-  }\n }\n\\ No newline at end of file",
      "@@ -1,6 +1,8 @@\n import React, {useState} from 'react'\n import { useNavigate  } from \"react-router-dom\"\n import login from '../layout/images/login.PNG'\n+import './auth.css'\n+\n const Login = () => {\n \n     const navigate = useNavigate ();",
      "@@ -1,6 +1,7 @@\n import React, {useState} from 'react'\n import { useNavigate  } from \"react-router-dom\"\n import login from '../layout/images/login.PNG'\n+import './auth.css'\n \n const Register = props => {\n     \n@@ -10,7 +11,8 @@ const Register = props => {\n     //user register fields\n     const [user,setUser] = useState({\n         name: '',\n-        lname: '',\n+        lastnameP: '',\n+        lastnameM: '',\n         date: '',\n         type: '',\n         sex: '',\n@@ -20,7 +22,7 @@ const Register = props => {\n         password2: ''\n     });\n \n-    const {name,lname,date,cedula,email,password,password2} = user;\n+    const {name,lastnameP,lastnameM,date,cedula,email,password,password2} = user;\n \n     //copies user data and changes the target of the onchange\n     const onChange = e => setUser({...user, [e.target.name]:e.target.value});\n@@ -73,7 +75,7 @@ const Register = props => {\n                         <div className='grid-2'>\n                             <div>\n                                 <input placeholder='Nombre' type='text' name = 'name' value={name} onChange = {onChange} required/>\n-                                <input placeholder='Apellido' type='text' name = 'lname' value={lname} onChange = {onChange} required/>\n+                                <input placeholder='Apellido Paterno' type='text' name = 'lastnameP' value={lastnameP} onChange = {onChange} required/>\n                                 <input placeholder='Fecha de nacimiento' type='date' name = 'date' value={date} onChange = {onChange} required/>\n                                 <select id=\"empleados\" name='type' onChange = {onChange}>\n                                     <option value=\"M\u00e9dic@\">M\u00e9dic@</option>\n@@ -86,6 +88,7 @@ const Register = props => {\n                             </div>\n                             <div>\n                                 <input placeholder='C\u00e9dula' type='text' name = 'cedula' value={cedula} onChange = {onChange} required/>\n+                                <input placeholder='Apellido Materno' type='text' name = 'lastnameM' value={lastnameM} onChange = {onChange} required/>\n                                 <input placeholder='Correo Electr\u00f3nico' type='email' name = 'email' value={email} onChange = {onChange} required/>\n                                 <div>\n                                     <i className=\"bi bi-eye\" id=\"togglePassword\" onClick={showPassword}/>",
      "@@ -0,0 +1,159 @@\n+.form-group {\n+    margin: 1.2rem 0;\n+  }\n+  \n+  .form-group input {\n+    margin: 0.2rem 0;\n+  }\n+  \n+  input[type='text'],\n+  input[type='email'],\n+  input[type='password'],\n+  input[type='date'],\n+  input,\n+  select,\n+  textarea {\n+    display: block;\n+    width: 90%;\n+    font-size: 1.2rem;\n+    border: none;\n+    border-radius: 8px;\n+    background-color: #EFF0F7;\n+    padding: 15px;\n+    margin: 15px;\n+    font-size: 18px;\n+    outline: none;\n+  }\n+  \n+  select{\n+    cursor: pointer;\n+  }\n+  \n+  input[type='submit'] {\n+    font: inherit;\n+    padding: 10px;\n+    background-color: #003699;\n+    color: white;\n+    border-radius: 8px;\n+    border: none;\n+    margin: 15px;\n+    font-size: 18px;\n+    cursor: pointer;\n+    width: fit-content;\n+  }\n+  \n+  input[type='submit']:active,\n+  .btn-back:active{\n+    transform: scale(0.85);\n+    box-shadow: 3px 2px 25px 1px rgba(0,0,0,0.25);\n+  }\n+  \n+  .btn-back{\n+    display: inline-block;\n+    font-size: 18px;\n+    font-weight: bold;\n+    color: #333;\n+    padding: 10px;\n+    font-size: 1rem;\n+    border: none;\n+    cursor: pointer;\n+    outline: none;\n+    border-radius: 8px;\n+    margin-left: 15px;\n+  }\n+  \n+  .geriatrik{\n+    font-size: 72px;\n+    font-weight: bold;\n+    margin-left: 15px;\n+  }\n+  \n+  .auth-header{\n+    font-size: 30px;\n+    margin-left: 15px;\n+  }\n+  \n+  .form-container {\n+    max-width: 600px;\n+    margin-left: 25%;\n+    margin-top: 15%;\n+    overflow: hidden;\n+    padding: 0 2rem;\n+    z-index: 1;\n+  }\n+  \n+  .grid-2 {\n+    display: grid;\n+    grid-template-columns: repeat(2, 1fr);\n+    grid-gap: 2rem;\n+  }\n+  \n+  .login-img{\n+    float: right;\n+    overflow: hidden;\n+    max-width: 600px;\n+    margin-top: 15%;\n+    margin-right: 25%;\n+  }\n+  \n+  #togglePassword2,\n+  #togglePassword{\n+    position: relative;\n+    left: 90%;\n+    top: 10px;\n+    padding: 10px;\n+    cursor: pointer;\n+  }\n+  \n+  #password2,\n+  #password{\n+    margin-left: 15px;\n+    margin-top: -25px;\n+  }\n+  \n+  @keyframes App-logo-spin {\n+    from {\n+      transform: rotate(0deg);\n+    }\n+    to {\n+      transform: rotate(360deg);\n+    }\n+  }\n+  \n+  @media (max-width: 1200px) {\n+    .login-img{\n+      width: 400px;\n+      margin-top: 40% ;\n+    }\n+  \n+    input[type='text'],\n+    input[type='email'],\n+    input[type='password'],\n+    input[type='date'],\n+    select,\n+    textarea {\n+      width: 90%;\n+    }\n+  \n+    .form-container {\n+      margin-top: 25%;\n+    }\n+  }\n+  \n+  @media (max-width: 1100px) {\n+    .login-img{\n+      display: none;\n+    }\n+  \n+    .form-container {\n+      margin: 5%;\n+    }\n+  \n+    .grid-2 {\n+      display: block;\n+    }\n+  \n+    .form-container {\n+      margin-right: 8%;\n+    }\n+  }\n\\ No newline at end of file"
    ]
  },
  {
    "message": "Delete package-lock.json",
    "additions": []
  },
  {
    "message": "fixed package-lock",
    "additions": []
  },
  {
    "message": "Merge pull request #18 from CarloLj/login/register\n\ntoken check and various fixes",
    "additions": [
      "@@ -9,7 +9,15 @@ import Reports from \"./components/pages/Reports\";\n import Navbar from \"./components/Navbar\";\n import Patient from \"./components/pages/PatientCards/Patient\";\n import Moca from \"./components/pages/MocaPage/Moca\";\n-import NewPatient from './components/newPatient/NewPatient';\n+\n+\n+//utils\n+import setAuthToken from \"./utils/setAuthToken\";\n+\n+//set auth token for all the web app\n+if(localStorage.getItem('token')){\n+    setAuthToken(localStorage.getItem('token')); \n+}\n \n function App() {\n     return (\n@@ -21,7 +29,6 @@ function App() {\n                     <Route exact path='/home' element = {<Home/>}/>\n                     <Route exact path='/Register' element = {<Register/>}/>\n                     <Route exact path='/PatientCard/:id' element = {<Patient/>}/>\n-                    <Route exact path='/NewPatient' element = {<NewPatient/>}/>\n                 </Routes>\n             </Fragment>\n         </Router>",
      "@@ -135,11 +135,11 @@ const Register = props => {\n                                 <input placeholder='Correo Electr\u00f3nico' type='email' name = 'email' value={email} onChange = {onChange} required/>\n                                 <div>\n                                     <i className=\"bi bi-eye\" id=\"togglePassword\" onClick={showPassword}/>\n-                                    <input id = \"password\" placeholder='Contrase\u00f1a' type='password' name = 'password' value={password} onChange = {onChange} required/>\n+                                    <input id = \"password\" placeholder='Contrase\u00f1a' type='password' name = 'password' value={password} onChange = {onChange} required minLength={6}/>\n                                 </div>\n                                 <div>\n                                     <i className=\"bi bi-eye\" id=\"togglePassword2\" onClick={showPassword2}/>\n-                                    <input id = \"password2\" placeholder='Confirmar' type='password' name = 'password2' value={password2} onChange = {onChange} required/>\n+                                    <input id = \"password2\" placeholder='Confirmar' type='password' name = 'password2' value={password2} onChange = {onChange} required minLength={6}/>\n                                 </div>\n                                 <input placeholder='URL img de perfil' type='text' name = 'pfp' value={pfp} onChange = {onChange} required/>\n ",
      "@@ -116,11 +116,11 @@ const AddPatientButton = () => {\n \n     return(\n         <section>\n-            <a href=\"#\" class='addPatientButton' onClick={open}>.</a>\n-            <div class = \"modal-container\">\n-                <div class = \"modal modal-close\">\n-                    <a class = \"close\" onClick={close}>X</a>\n-                    <div class = \"modal-text\">\n+            <a href=\"#\" className='addPatientButton' onClick={open}>.</a>\n+            <div className = \"modal-container\">\n+                <div className = \"modal modal-close\">\n+                    <a className = \"close\" onClick={close}>X</a>\n+                    <div className = \"modal-text\">\n                         <h2 className='header'>Agregar nuevo paciente</h2>\n                         <form id = \"formulario\" onSubmit={onSubmit}>\n                             <div className='grid-2'>\n@@ -138,20 +138,20 @@ const AddPatientButton = () => {\n                                 </div>\n                                 <div>\n                                     <input placeholder='Discapacidades' type='text' name = 'disabilities' value={disabilities} onChange = {onChange} required/>\n-                                    <div class ='toggle-div'>\n-                                        <label class ='toggle-label'>Queja de Memoria</label>\n-                                        <label class=\"toggle\">\n+                                    <div className ='toggle-div'>\n+                                        <label className ='toggle-label'>Queja de Memoria</label>\n+                                        <label className=\"toggle\">\n                                             <input id='memoryCheckbox' type='checkbox' name = 'memoryComplaint' onChange = {onChange} />\n-                                            <span class = \"slider\"></span>\n-                                            <span class =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n+                                            <span className = \"slider\"></span>\n+                                            <span className =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n                                         </label>\n                                     </div>\n-                                    <div class ='toggle-div'>    \n-                                        <label class ='toggle-label'>Hipoacusia severa</label>\n-                                        <label class=\"toggle\">\n+                                    <div className ='toggle-div'>    \n+                                        <label className ='toggle-label'>Hipoacusia severa</label>\n+                                        <label className=\"toggle\">\n                                         <input id='hearingCheckbox' type='checkbox' name = 'severeHearingLoss' onChange = {onChange} />\n-                                            <span class = \"slider\"></span>\n-                                            <span class =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n+                                            <span className = \"slider\"></span>\n+                                            <span className =\"labels\" data-on=\"SI\" data-off=\"NO\"></span>\n                                         </label>\n                                     </div>\n                                 ",
      "@@ -1,78 +0,0 @@\n-import React, {useState} from 'react'\n-import { useNavigate  } from \"react-router-dom\"\n-\n-\n-const NewPatient = () => {\n-    \n-    //allow to navigate through the routes\n-    const navigate = useNavigate ();\n-\n-    //user register fields\n-    const [user,setUser] = useState({\n-        name: '',\n-        lastName: '',\n-        motherLastName: '',\n-        birthday: '',\n-        gender: '',\n-        scholarity: '',\n-        disabilities: '',\n-        memoryComplaint: '',\n-        severeHearingLoss: '',\n-        emergencyContact: '',\n-        profileImage: ''\n-    });\n-\n-    const {name, lastName, motherLastName, birthday, gender, scholarity, disabilities, memoryComplaint, severeHearingLoss, emergencyContact, image} = user;\n-\n-    //copies user data and changes the target of the onchange\n-    const onChange = e => setUser({...user, [e.target.name]:e.target.value});\n-\n-    const onSubmit = e => {\n-        e.preventDefault();\n-\n-        if(name === '' || lastName === '' || motherLastName === '' || birthday === '' || gender === '' || scholarity === '' || disabilities === '' || memoryComplaint === '' || severeHearingLoss === '' || emergencyContact === ''){\n-            //missing info\n-        }else{\n-            //register\n-            navigate('/home');\n-        }\n-    }\n-    \n-    //El onfocus=\"(this.type='date')\" no sirve\n-    return (\n-        <div className='grid-2'>\n-            <div className='form-container'>\n-                <h2 className='auth-header'>Add New Patient</h2>\n-                <form onSubmit={onSubmit}>\n-                    <div className='grid-2'>\n-                        <div>\n-                            <input placeholder='Nombre' type='text' name = 'name' value={name} onChange = {onChange} required/>\n-                            <input placeholder='Apellido Paterno' type='text' name = 'lastName' value={lastName} onChange = {onChange} required/>\n-                            <input placeholder='Apellido Materno' type='text' name = 'motherLastName' value={motherLastName} onChange = {onChange} required/>\n-                            <label for=\"fe\">Fecha de Nacimiento</label>\n-                            <input type='date' name = 'birthday' value={birthday} onChange = {onChange} required/>\n-                            <select  id=\"sexos\" name='sex' onChange = {onChange}>\n-                                <option value=\"Masculino\">Masculino</option>\n-                                <option value=\"Femenino\">Femenino</option>\n-                            </select >\n-                        </div>\n-                        <div>\n-                            <input placeholder='Escolaridad' type='text' name = 'scholarity' value={scholarity} onChange = {onChange} required/>\n-                            <input placeholder='Discapacidades' type='text' name = 'disabilities' value={disabilities} onChange = {onChange} required/>\n-                            <label>Queja de memoria</label>\n-                            <input placeholder='Queja de memoria' type='checkbox' name = 'memoryComplaint' value={memoryComplaint} onChange = {onChange} />\n-                            <label>Hipoacusia severa</label>\n-                            <input placeholder='Hipoacusia severa' type='checkbox' name = 'severeHearingLoss' value={severeHearingLoss} onChange = {onChange} />\n-                            <input placeholder='Contacto de Emergencia' type='number' name = 'emergencyContact' value={emergencyContact} onChange = {onChange} required/>\n-                            <input placeholder='URL Foto de perfil' type = 'text' id = \"files\" value={image} accept=\"image/png, image/jpeg\" onChange = {onChange}/>\n-                        </div>\n-                    </div>\n-                    <input type=\"submit\" value = \"Agregar Paciente\" formTarget='_blank'/>\n-                </form>\n-                <button className='btn-back' onClick={() => navigate('/home')}> Atr\u00e1s</button>\n-            </div>\n-        </div>\n-    )\n-}\n-\n-export default NewPatient;",
      "@@ -1,4 +1,4 @@\n-import React, {useState} from 'react'\n+import React, {useState,useEffect} from 'react'\n import Navbar from '../Navbar'\n import BubbleCard from '../visual/BubbleCard'\n import ListCard from '../visual/ListCard'\n@@ -10,19 +10,31 @@ import { useNavigate  } from \"react-router-dom\"\n import { IconBase } from 'react-icons'\n import AddPatientButton from '../newPatient/AddPatientButton'\n import SearchBar from \"../searchBar/searchBar\";\n+import axios from 'axios';\n+import { useAlert } from 'react-alert'\n \n const Home = () => {\n+  const alert = useAlert()\n   const navigate = useNavigate ();\n+  const [datos, setData] = useState(null);\n \n-  const loadPatients = () => {\n-    fetch(\"/patients\").then((res) => res.json()).then((data) => setData(data.message));\n+  const loadPatients = async () => {\n+    try {\n+      const res = await axios.get('/patients');\n+      setData(res.data.message);\n+      alert.success('Patients loaded');\n+    } catch (error) {\n+      alert.error('Error while fetching patients');\n+    }\n   }\n-  const [datos, setData] = React.useState(null);\n-  React.useEffect(() => {\n-    fetch(\"/patients\")\n-      .then((res) => res.json())\n-      .then((data) => setData(data.message));\n-  }, []);\n+\n+  useEffect(() => {\n+    if(!localStorage.token){\n+      navigate('/');\n+    }else{\n+      loadPatients();\n+    }\n+  },[]);\n \n   const OpenPatientCard = (currentPatient) => {\n     //allow to naviigate through the routes\n@@ -43,8 +55,6 @@ const Home = () => {\n   const query = new URLSearchParams(search).get('s');\n   const [searchQuery, setSearchQuery] = useState(query || '');\n   const filteredPosts = filterPosts(datos, searchQuery);\n-  \n-  \n \n   const [tipoVista, setVista] = useState(\"Grid\");\n   //loadPatients(); En caso de que quieran drenar la memoria activenlo, pero se activa un listener para nuevos datos",
      "@@ -2,7 +2,9 @@ import './Moca.css';\n \r\n import Unity, {UnityContext} from 'react-unity-webgl';\r\n import { Fragment, useEffect, useState } from 'react';\r\n-import { Navigate, useParams } from \"react-router-dom\";\r\n+import { Navigate, useParams, useNavigate } from \"react-router-dom\";\r\n+import axios from 'axios';\r\n+import { useAlert } from 'react-alert'\r\n \r\n const unityContext = new UnityContext({\r\n   productName: \"Geriatrik\",\r\n@@ -18,6 +20,8 @@ const unityContext = new UnityContext({\n }); \r\n \r\n function Moca() {\r\n+  const navigate = useNavigate ();\r\n+  const alert = useAlert();\r\n   const [isUnityMounted, setIsUnityMounted] = useState(true);\r\n   const [isLoaded, setIsLoaded] = useState(false);\r\n   const [progression, setProgression] = useState(0);\r\n@@ -26,13 +30,18 @@ function Moca() {\n   const {idEmpleado, idPaciente} = useParams();\r\n \r\n   useEffect(function(){\r\n-    unityContext.on(\"progress\", handleOnUnityProgress);\r\n-    unityContext.on(\"loaded\", handleOnUnityLoaded);\r\n-    unityContext.on(\"MocaFinished\", handleMocaFinish);\r\n-\r\n-    return function(){\r\n-      unityContext.removeAllEventListeners();\r\n-    };\r\n+    if(!localStorage.token){\r\n+      navigate('/');\r\n+    }else{\r\n+      unityContext.on(\"progress\", handleOnUnityProgress);\r\n+      unityContext.on(\"loaded\", handleOnUnityLoaded);\r\n+      unityContext.on(\"MocaFinished\", handleMocaFinish);\r\n+\r\n+      return function(){\r\n+        unityContext.removeAllEventListeners();\r\n+      };\r\n+    }\r\n+    \r\n   }, []);\r\n \r\n   function handleOnUnityProgress(progression) {\r\n@@ -66,13 +75,26 @@ function Moca() {\n     respuesta[\"puntos\"] = mocaRes.resultados.total;\r\n     respuesta[\"respuestasJSON\"] = results.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\r\n \r\n-    fetch(\"/moca\", {\r\n+    try {\r\n+      const config = {\r\n+        headers: {\r\n+            'Content-Type': 'application/json; charset=UTF-8'\r\n+        }\r\n+    }\r\n+      const res = await axios.post('/moca',JSON.stringify(respuesta),config);\r\n+      if(res){\r\n+        alert.success('Test saved');\r\n+      }\r\n+    } catch (error) {\r\n+      alert.error('Failed to save test');\r\n+    }\r\n+    /*fetch(\"/moca\", {\r\n       method: 'POST',\r\n       headers:{\r\n         'Content-type': 'application/json; charset=UTF-8'\r\n       },\r\n       body: JSON.stringify(respuesta)\r\n-    });\r\n+    });*/\r\n   }\r\n \r\n   function handleOnClickUnMountUnity() {\r",
      "@@ -6,8 +6,11 @@ import TestButton from \"../../TestButton\";\n import TestGraph from \"../../graph/TestGraph\";\r\n import { Bar } from \"react-chartjs-2\";\r\n import ListCardTest from \"./ListCardTest\";\r\n-import { useParams } from \"react-router-dom\";\r\n+import { useParams, useNavigate } from \"react-router-dom\";\r\n import BackButton from '../../BackButton'\r\n+import axios from 'axios';\r\n+import { useAlert } from 'react-alert'\r\n+\r\n \r\n const HomeLink = \"/moca/\";\r\n \r\n@@ -16,30 +19,42 @@ const HomeLink = \"/moca/\";\n \r\n const Details = (props) => {\r\n   const { id } = useParams(); // pacienteId\r\n-  const [datos, setData] = React.useState(null);\r\n+  const [datos, setData] = useState(null);\r\n   let valuesArray;\r\n \r\n-  if(datos) {\r\n-    var graphData = datos.map((currentGraph) => {\r\n-    return(\r\n-      currentGraph.puntos\r\n-    );\r\n-    });\r\n-    var graphDates = datos.map((currentGraph) => {\r\n+  const loadData = async () => {\r\n+    try {\r\n+      const res = await axios.get(`/tamizaje/${encodeURIComponent(props.patientID)}\"`);\r\n+      console.log(res);\r\n+      setData(res.data.message);\r\n+      console.log(datos);\r\n+\r\n+      alert.success('Data loaded');\r\n+\r\n+    } catch (error) {\r\n+      alert.error('Error while fetching data');\r\n+    }\r\n+  }\r\n+  useEffect(() => {\r\n+    loadData();\r\n+    if(datos) {\r\n+      var graphData = datos.map((currentGraph) => {\r\n       return(\r\n-        currentGraph.fecha\r\n+        currentGraph.puntos\r\n       );\r\n       });\r\n-  }\r\n-  \r\n-\r\n-  React.useEffect(() => {\r\n-    fetch(`/tamizaje/${encodeURIComponent(props.patientID)}\"`, {\r\n+      var graphDates = datos.map((currentGraph) => {\r\n+        return(\r\n+          currentGraph.fecha\r\n+        );\r\n+        });\r\n+    }\r\n+    /*fetch(`/tamizaje/${encodeURIComponent(props.patientID)}\"`, {\r\n       method: \"GET\",\r\n       headers: { \"Content-Type\": \"application/json\" },\r\n     })\r\n       .then((res) => res.json())\r\n-      .then((data) => setData(data.message));\r\n+      .then((data) => setData(data.message));*/\r\n   }, []);\r\n   // console.log(datos);\r\n \r\n@@ -53,7 +68,7 @@ const Details = (props) => {\n   if (datos) {\r\n     var graphDates = datos.map((currentGraph)  => {\r\n       return (\r\n-        currentGraph.fecha\r\n+        currentGraph.fecha.slice(0, 10)\r\n       );\r\n     });\r\n   }\r\n@@ -73,7 +88,7 @@ const Details = (props) => {\n   // }\r\n \r\n   function getMocaLink(){\r\n-    return `/moca/${1}/${id}`\r\n+    return `/moca/${localStorage.getItem('id')}/${id}`\r\n   }\r\n   //localStorage.getItem(\"id\")\r\n \r\n@@ -131,6 +146,9 @@ const Details = (props) => {\n             <tbody>\r\n               {datos ? (\r\n                 datos.map((currentTest) => {\r\n+                  \r\n+                  currentTest.fecha = currentTest.fecha.slice(0, 10);\r\n+\r\n                   return (\r\n                     <ListCardTest\r\n                       testObj={currentTest}\r\n@@ -192,11 +210,31 @@ const getEdad = (dateString) => {\n const Patient = () => {\r\n   const { id } = useParams();\r\n   const [datos, setData] = React.useState(null);\r\n-  React.useEffect(() => {\r\n-    fetch(\"/patient/\" + id)\r\n+  const alert = useAlert();\r\n+  const navigate = useNavigate();\r\n+  const loadPatient = async () =>{\r\n+    try {\r\n+      const res = await axios.get(\"/patient/\" + id);\r\n+      setData(res.data.message);\r\n+      console.log(datos);\r\n+\r\n+      alert.success('Patient loaded');\r\n+\r\n+    } catch (error) {\r\n+      alert.error('Error while fetching data');\r\n+    }\r\n+  }\r\n+\r\n+  useEffect(() => {\r\n+    if(!localStorage.token){\r\n+      navigate('/');\r\n+    }else{\r\n+      loadPatient();\r\n+    }\r\n+    /*fetch(\"/patient/\" + id)\r\n       .then((res) => res.json())\r\n-      .then((data) => setData(data.message));\r\n-  }, [id]);\r\n+      .then((data) => setData(data.message));*/\r\n+  }, []);\r\n   return !datos ? (\r\n     <h1>Loading</h1>\r\n   ) : (\r",
      "@@ -0,0 +1,16 @@\n+import axios from 'axios';\n+\n+const setAuthToken = token =>{\n+    if(token){\n+        //backend header in which we send the token\n+        //sets a default config to use in every request\n+        /*this allows us to mantain the authorization \n+        in all of our app without having to make a request for the token \n+        each time we need it*/\n+        axios.defaults.headers.common['x-auth-token'] = token;\n+    }else{\n+        delete axios.defaults.headers.common['x-auth-token'];\n+    }\n+}\n+\n+export default setAuthToken;\n\\ No newline at end of file"
    ]
  }
]